(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-address-address"],{"2a0a":function(e,t,r){"use strict";r.r(t);var s=r("757f"),i=r("b722");for(var o in i)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(o);var n=r("f0c5"),d=Object(n["a"])(i["default"],s["b"],s["c"],!1,null,"16da76ce",null,!1,s["a"],void 0);t["default"]=d.exports},"757f":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return s}));var s={uniForms:r("b632").default,uniFormsItem:r("cc5c").default,uniEasyinput:r("c747").default,uniIcons:r("b09a").default},i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticStyle:{padding:"20rpx"}},[r("v-uni-view",{staticClass:"box"},[r("uni-forms",{ref:"formRef",attrs:{modelValue:e.form,rules:e.rules,"label-width":"160rpx","label-align":"right"}},[r("uni-forms-item",{attrs:{label:"地址",name:"address",required:!0}},[r("uni-easyinput",{attrs:{type:"text",placeholder:"请输入地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),r("uni-forms-item",{attrs:{label:"门牌号",name:"doorNo",required:!0}},[r("uni-easyinput",{attrs:{type:"text",placeholder:"请输入门牌号"},model:{value:e.form.doorNo,callback:function(t){e.$set(e.form,"doorNo",t)},expression:"form.doorNo"}})],1),r("uni-forms-item",{attrs:{label:"联系人",name:"userName",required:!0}},[r("uni-easyinput",{attrs:{type:"text",placeholder:"请输入联系人"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),r("uni-forms-item",{attrs:{label:"联系电话",name:"phone",required:!0}},[r("uni-easyinput",{attrs:{type:"text",placeholder:"请输入联系电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),r("v-uni-view",[r("v-uni-button",{staticStyle:{height:"70rpx","line-height":"70rpx","font-size":"30rpx","background-color":"#006eff","border-color":"#006eff"},attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存并使用")])],1)],1)],1),e.addressList.length?r("v-uni-view",{staticClass:"box",staticStyle:{margin:"20rpx 0"}},e._l(e.addressList,(function(t){return r("v-uni-view",{key:t.id,staticStyle:{"margin-bottom":"20rpx","padding-bottom":"10rpx","border-bottom":"2rpx solid #eee"}},[r("v-uni-view",{on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.selectAddress(t.id)}}},[r("v-uni-view",{staticStyle:{"font-weight":"bold","font-size":"32rpx","margin-bottom":"10rpx"}},[e._v(e._s(t.address+t.doorNo))]),r("v-uni-view",{staticStyle:{color:"#888"}},[r("v-uni-text",[e._v(e._s(t.userName))]),r("v-uni-text",{staticStyle:{"margin-left":"20rpx"}},[e._v(e._s(t.phone))])],1)],1),r("v-uni-view",{staticStyle:{"text-align":"right"}},[r("uni-icons",{staticStyle:{"margin-right":"20rpx"},attrs:{type:"compose",size:"18"},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.handleEdit(t)}}}),r("uni-icons",{attrs:{type:"trash",size:"18"},on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.del(t.id)}}})],1)],1)})),1):e._e()],1)},o=[]},b722:function(e,t,r){"use strict";r.r(t);var s=r("caf9"),i=r.n(s);for(var o in s)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return s[e]}))}(o);t["default"]=i.a},caf9:function(e,t,r){"use strict";r("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("e9c4");var s={data:function(){return{form:{},addressList:[],rules:{address:{rules:[{required:!0,errorMessage:"请填写地址"}]},doorNo:{rules:[{required:!0,errorMessage:"请填写门牌号"}]},userName:{rules:[{required:!0,errorMessage:"请填写联系人"}]},phone:{rules:[{required:!0,errorMessage:"请填写联系电话"}]}},type:"",fromAddressId:0,toAddressId:0,user:uni.getStorageSync("xm-user")}},onLoad:function(e){this.type=e.type,this.fromAddressId=e.fromAddressId,this.toAddressId=e.toAddressId,this.load()},methods:{selectAddress:function(e){"from"===this.type?this.fromAddressId=e:"to"===this.type&&(this.toAddressId=e),uni.reLaunch({url:"/pages/preOrders/preOrders?type="+this.type+"&fromAddressId="+this.fromAddressId+"&toAddressId="+this.toAddressId})},handleEdit:function(e){this.form=JSON.parse(JSON.stringify(e))},del:function(e){var t=this;this.$request.del("/address/delete/"+e).then((function(e){"200"===e.code?(uni.showToast({title:"操作成功"}),t.load()):uni.showToast({icon:"error",title:e.msg})}))},load:function(){var e=this;this.$request.get("/address/selectAll",{userId:this.user.id}).then((function(t){e.addressList=t.data||[]}))},save:function(){var e=this;this.$refs.formRef.validate().then((function(t){e.$request.request({url:e.form.id?"/address/update":"/address/add",method:e.form.id?"PUT":"POST",data:e.form}).then((function(t){"200"===t.code?(uni.showToast({title:"操作成功"}),e.form={},e.load(),e.selectAddress(t.data.id)):uni.showToast({icon:"error",title:t.msg})}))})).catch((function(e){console.log("err",e)}))}}};t.default=s}}]);